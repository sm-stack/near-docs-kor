"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3627],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),p=d(n),h=r,m=p["".concat(s,".").concat(h)]||p[h]||u[h]||o;return n?a.createElement(m,l(l({ref:t},c),{},{components:n})):a.createElement(m,l({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var d=2;d<o;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},24066:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>u,default:()=>w,frontMatter:()=>c,metadata:()=>p,toc:()=>m});var a=n(87462),r=n(63366),o=(n(67294),n(3905));const l=n.p+"assets/images/chapter-2-crossword-blank-007e0f949a30b440e51fd49503971455.png",i=n.p+"assets/images/teaching-just-teacher--herogranada.near--GranadaHero-13deebf35d81b88903da4e4733b46a91.jpeg",s=n.p+"assets/images/erase-recreate-subaccount--3one9.near--3one92-7d5e385b4a5b788168a2419d108180f8.gif";var d=["components"],c={sidebar_position:4,sidebar_label:"Add a puzzle",title:"Adding a new puzzle now that we're using a collection that can contain multiple crossword puzzles"},u="Adding a puzzle",p={unversionedId:"tutorials/crosswords/beginner/adding-a-puzzle",id:"tutorials/crosswords/beginner/adding-a-puzzle",title:"Adding a new puzzle now that we're using a collection that can contain multiple crossword puzzles",description:"",source:"@site/../docs/3.tutorials/crosswords/02-beginner/04-adding-a-puzzle.md",sourceDirName:"3.tutorials/crosswords/02-beginner",slug:"/tutorials/crosswords/beginner/adding-a-puzzle",permalink:"/near-docs-kor/zh-CN/tutorials/crosswords/beginner/adding-a-puzzle",draft:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/3.tutorials/crosswords/02-beginner/04-adding-a-puzzle.md",tags:[],version:"current",lastUpdatedBy:"[sm-stack]",lastUpdatedAt:1675844989,formattedLastUpdatedAt:"2023\u5e742\u67088\u65e5",sidebarPosition:4,frontMatter:{sidebar_position:4,sidebar_label:"Add a puzzle",title:"Adding a new puzzle now that we're using a collection that can contain multiple crossword puzzles"},sidebar:"tutorials",previous:{title:"Actions and sending NEAR",permalink:"/near-docs-kor/zh-CN/tutorials/crosswords/beginner/actions"},next:{title:"Access keys and login 1/2",permalink:"/near-docs-kor/zh-CN/tutorials/crosswords/beginner/logging-in"}},h={},m=[{value:"Building and deploying",id:"building-and-deploying",level:2},{value:"The clues",id:"the-clues",level:2},{value:"Solution hash",id:"solution-hash",level:2},{value:"Add the puzzle",id:"add-the-puzzle",level:2}],g={toc:m};function w(e){var t=e.components,n=(0,r.Z)(e,d);return(0,o.kt)("wrapper",(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"adding-a-puzzle"},"Adding a puzzle"),(0,o.kt)("p",null,"We're going to make a new puzzle, which means we need to provide the smart contract with a set of clues and info about the answers."),(0,o.kt)("p",null,"Of course, we'll not be sending the ",(0,o.kt)("em",{parentName:"p"},"answers")," to the smart contract, otherwise everyone could see. We will, however, send details about each clue, including:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The clue number"),(0,o.kt)("li",{parentName:"ul"},"Whether it's a down or across clue"),(0,o.kt)("li",{parentName:"ul"},"The coordinates (x and y position)"),(0,o.kt)("li",{parentName:"ul"},"The length of the clue. (How many letters)")),(0,o.kt)("p",null,"Essentially, we're going to tell the smart contract enough information for an empty puzzle like this:"),(0,o.kt)("img",{src:l,alt:"Blank crossword for chapter 2 of the crossword puzzle smart contract tutorial",width:"600"}),(0,o.kt)("br",null),(0,o.kt)("p",null,"(Note that we aren't showing the human-readable clues in the above screenshot, but we will provide that as well.)"),(0,o.kt)("h2",{id:"building-and-deploying"},"Building and deploying"),(0,o.kt)("p",null,"Let's use the same steps we learned from the first chapter:"),(0,o.kt)("figure",null,(0,o.kt)("img",{src:i,alt:"Teacher shows chalkboard with instructions on how to properly deploy a smart contract. 1. Build smart contract. 2. Create a subaccount (or delete and recreate if it exists) 3. Deploy to subaccount. 4. Interact. Art created by herogranada.near",width:"600"}),(0,o.kt)("figcaption",null,"Art by ",(0,o.kt)("a",{href:"https://twitter.com/GranadaHero",target:"_blank"},"herogranada.near"))),(0,o.kt)("br",null),(0,o.kt)("p",null,"Navigate to the ",(0,o.kt)("inlineCode",{parentName:"p"},"contract")," directory, then run the build script for your system:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"./build.sh\n")),(0,o.kt)("p",null,"If following from the previous chapter, you'll likely have a subaccount already created. For the purpose of demonstration, we're calling the subaccount (where we deploy the contract) ",(0,o.kt)("inlineCode",{parentName:"p"},"crossword.friend.testnet")," and the parent account is thus ",(0,o.kt)("inlineCode",{parentName:"p"},"friend.testnet"),"."),(0,o.kt)("p",null,"Let's delete the subaccount and recreate it, to start from a blank slate."),(0,o.kt)("figure",null,(0,o.kt)("img",{src:s,alt:"Animation of an alien in space with a computer deleting and re-writing the account crossword.friend.testnet Art by 3one9.near",width:"600"}),(0,o.kt)("figcaption",null,"Art by ",(0,o.kt)("a",{href:"https://twitter.com/3one92",target:"_blank"},"3one9.near"))),(0,o.kt)("br",null),(0,o.kt)("p",null,"Here's how to delete and recreate the subaccount using NEAR CLI:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'# Delete the subaccount and send remaining balance to friend.testnet\nnear delete crossword.friend.testnet friend.testnet\n# Create the subaccount again \nnear create-account crossword.friend.testnet --masterAccount friend.testnet\n# Deploy, calling the "new" method with the the parameter for owner_id\nnear deploy crossword.friend.testnet --wasmFile res/crossword_tutorial_chapter_2.wasm --initFunction new --initArgs \'{"owner_id": "crossword.friend.testnet"}\'\n')),(0,o.kt)("p",null,"Now we're ready to construct our new crossword puzzle and add it via the ",(0,o.kt)("inlineCode",{parentName:"p"},"new_puzzle")," method. Let's start with the clues for this new puzzle."),(0,o.kt)("h2",{id:"the-clues"},"The clues"),(0,o.kt)("p",null,"We're going to use these clues below for our improved puzzle. The ",(0,o.kt)("strong",{parentName:"p"},"Answer")," column will not get sent to the smart contract when we call ",(0,o.kt)("inlineCode",{parentName:"p"},"new_puzzle"),"."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Number"),(0,o.kt)("th",{parentName:"tr",align:null},"Answer"),(0,o.kt)("th",{parentName:"tr",align:null},"Clue"),(0,o.kt)("th",{parentName:"tr",align:null},"(x, y) coords"),(0,o.kt)("th",{parentName:"tr",align:null},"length"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"1"),(0,o.kt)("td",{parentName:"tr",align:null},"paras"),(0,o.kt)("td",{parentName:"tr",align:null},"NFT market on NEAR that specializes in cards and comics."),(0,o.kt)("td",{parentName:"tr",align:null},"(1, 1)"),(0,o.kt)("td",{parentName:"tr",align:null},"5")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"2"),(0,o.kt)("td",{parentName:"tr",align:null},"rainbowbridge"),(0,o.kt)("td",{parentName:"tr",align:null},"You can move assets between NEAR and different chains, including Ethereum, by visiting ",(0,o.kt)("strong",{parentName:"td"},"__"),".app"),(0,o.kt)("td",{parentName:"tr",align:null},"(0, 2)"),(0,o.kt)("td",{parentName:"tr",align:null},"13")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"3"),(0,o.kt)("td",{parentName:"tr",align:null},"mintbase"),(0,o.kt)("td",{parentName:"tr",align:null},"NFT market on NEAR with art, physical items, tickets, and more."),(0,o.kt)("td",{parentName:"tr",align:null},"(9, 1)"),(0,o.kt)("td",{parentName:"tr",align:null},"8")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"4"),(0,o.kt)("td",{parentName:"tr",align:null},"yoctonear"),(0,o.kt)("td",{parentName:"tr",align:null},"The smallest denomination of the native token on NEAR."),(0,o.kt)("td",{parentName:"tr",align:null},"(3, 8)"),(0,o.kt)("td",{parentName:"tr",align:null},"9")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"5"),(0,o.kt)("td",{parentName:"tr",align:null},"cli"),(0,o.kt)("td",{parentName:"tr",align:null},"You typically deploy a smart contract with the NEAR ___ tool."),(0,o.kt)("td",{parentName:"tr",align:null},"(5, 8)"),(0,o.kt)("td",{parentName:"tr",align:null},"3")))),(0,o.kt)("p",null,"The x and y coordinates have their origin in the upper-left side of the puzzle grid, and each row and column start at 0."),(0,o.kt)("h2",{id:"solution-hash"},"Solution hash"),(0,o.kt)("p",null,"Let's derive the sha256 hash using an ",(0,o.kt)("a",{parentName:"p",href:"https://www.wolframalpha.com/input/?i=sha256+%22paras+rainbowbridge+mintbase+yoctonear+cli%22"},"easy online tool")," (there are many other offline methods as well) to discover the solution hash:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"d1a5cf9ad1adefe0528f7d31866cf901e665745ff172b96892693769ad284010\n")),(0,o.kt)("h2",{id:"add-the-puzzle"},"Add the puzzle"),(0,o.kt)("p",null,"Add a new puzzle using NEAR CLI with this long command, replacing ",(0,o.kt)("inlineCode",{parentName:"p"},"crossword.friend.testnet")," with your subaccount:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'near call crossword.friend.testnet new_puzzle \'{\n  "solution_hash": "d1a5cf9ad1adefe0528f7d31866cf901e665745ff172b96892693769ad284010",\n  "answers": [\n   {\n     "num": 1,\n     "start": {\n       "x": 1,\n       "y": 1\n     },\n     "direction": "Down",\n     "length": 5,\n     "clue": "NFT market on NEAR that specializes in cards and comics."\n   },\n   {\n     "num": 2,\n     "start": {\n       "x": 0,\n       "y": 2\n     },\n     "direction": "Across",\n     "length": 13,\n     "clue": "You can move assets between NEAR and different chains, including Ethereum, by visiting ______.app"\n   },\n   {\n     "num": 3,\n     "start": {\n       "x": 9,\n       "y": 1\n     },\n     "direction": "Down",\n     "length": 8,\n     "clue": "NFT market on NEAR with art, physical items, tickets, and more."\n   },\n   {\n     "num": 4,\n     "start": {\n       "x": 3,\n       "y": 8\n     },\n     "direction": "Across",\n     "length": 9,\n     "clue": "The smallest denomination of the native token on NEAR."\n   },\n   {\n     "num": 5,\n     "start": {\n       "x": 5,\n       "y": 8\n     },\n     "direction": "Down",\n     "length": 3,\n     "clue": "You typically deploy a smart contract with the NEAR ___ tool."\n   }\n  ]\n}\' --accountId crossword.friend.testnet\n')),(0,o.kt)("p",null,"Note that our contract name and the account we're calling this from are both ",(0,o.kt)("inlineCode",{parentName:"p"},"crossword.friend.testnet"),". That's because we added a check at the top of ",(0,o.kt)("inlineCode",{parentName:"p"},"new_puzzle")," to make sure the predecessor is the ",(0,o.kt)("inlineCode",{parentName:"p"},"owner_id"),"."),(0,o.kt)("p",null,"Now our smart contract has information about this second crossword puzzle."),(0,o.kt)("p",null,"Let's explore how to make our frontend have a login button and truly turn this into a decentralized app (dApp)!"))}w.isMDXComponent=!0}}]);