"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4342],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(n),h=r,m=d["".concat(s,".").concat(h)]||d[h]||u[h]||l;return n?a.createElement(m,o(o({ref:t},p),{},{components:n})):a.createElement(m,o({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var c=2;c<l;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9310:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var a=n(87462),r=n(63366),l=(n(67294),n(3905)),o=["components"],i={id:"kurtosis-localnet",title:"Creating a Local Development Environment",sidebar_label:"Local Development",description:"Using Kurtosis NEAR Package to develop locally"},s=void 0,c={unversionedId:"develop/testing/kurtosis-localnet",id:"develop/testing/kurtosis-localnet",title:"Creating a Local Development Environment",description:"Using Kurtosis NEAR Package to develop locally",source:"@site/../docs/2.develop/testing/kurtosis-localnet.md",sourceDirName:"2.develop/testing",slug:"/develop/testing/kurtosis-localnet",permalink:"/near-docs-kor/zh-CN/develop/testing/kurtosis-localnet",draft:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/2.develop/testing/kurtosis-localnet.md",tags:[],version:"current",lastUpdatedBy:"[sm-stack]",lastUpdatedAt:1675844989,formattedLastUpdatedAt:"2023\u5e742\u67088\u65e5",frontMatter:{id:"kurtosis-localnet",title:"Creating a Local Development Environment",sidebar_label:"Local Development",description:"Using Kurtosis NEAR Package to develop locally"},sidebar:"develop",previous:{title:"Integration Test",permalink:"/near-docs-kor/zh-CN/develop/testing/integration-test"},next:{title:"Workspaces Migration",permalink:"/near-docs-kor/zh-CN/develop/testing/workspaces-migration"}},p={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Setup",id:"setup",level:2},{value:"Launch Kurtosis NEAR Package",id:"launching-cluster",level:3},{value:"Setup Environment Variables",id:"setup-environment-variables",level:3},{value:"Testing",id:"testing",level:3},{value:"Using Wallet and Explorer",id:"using-wallet-and-explorer",level:2},{value:"Local NEAR Wallet",id:"local-near-wallet",level:3},{value:"Local NEAR Explorer",id:"local-near-explorer",level:3},{value:"Deploy a Smart Contract",id:"deploy-a-smart-contract",level:2},{value:"Connecting a dApp to <code>localnet</code>",id:"connecting-a-dapp-to-localnet",level:2},{value:"Clone Example dApp",id:"clone-example-dapp",level:3},{value:"Configure Network",id:"configure-network",level:3},{value:"Create Contract Account",id:"create-contract-account",level:3},{value:"Deploy Contract to <code>localnet</code>",id:"deploy-contract-to-localnet",level:3},{value:"Managing NEAR Pacakages",id:"managing-near-pacakages",level:2},{value:"View Package Status",id:"view-package-status",level:3},{value:"View Package Details",id:"view-package-details",level:3},{value:"Terminate Package",id:"terminate-package",level:3},{value:"Delete Package",id:"delete-package",level:3},{value:"Delete All Package",id:"delete-all-package",level:3}],d={toc:u};function h(e){var t=e.components,i=(0,r.Z)(e,o);return(0,l.kt)("wrapper",(0,a.Z)({},d,i,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("a",{parentName:"p",href:"https://www.kurtosis.com/"},"Kurtosis")," has created an easy way to spin up a local NEAR testing environment using a ",(0,l.kt)("a",{parentName:"p",href:"https://www.docker.com/"},"Docker container"),". ")),(0,l.kt)("p",null,"This Kurtosis NEAR Package contains the following components:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/near/near-indexer-for-explorer"},"Indexer for Explorer")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/near/near-explorer"},"NEAR Explorer")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/near/near-wallet"},"NEAR Wallet")),(0,l.kt)("li",{parentName:"ul"},"Local RPC Endpoint")),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://www.loom.com/share/8a1b8e2138334a81a380f5d523fba27e"},"Visit here")," to see a short demo of the package in action."),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://docs.docker.com/get-docker/"},"Docker")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://classic.yarnpkg.com/lang/en/docs/install"},"Yarn")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"/tools/near-cli#setup"},"NEAR-CLI")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://docs.kurtosis.com/install"},"Kurtosis CLI"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Start Kurtosis engine after installation using: ",(0,l.kt)("inlineCode",{parentName:"li"},"kurtosis engine start"))))),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"setup"},"Setup"),(0,l.kt)("h3",{id:"launching-cluster"},"Launch Kurtosis NEAR Package"),(0,l.kt)("p",null,"Launch your Kurtosis NEAR Package in four easy steps!"),(0,l.kt)("p",null,"1) Launch ",(0,l.kt)("a",{parentName:"p",href:"https://docs.docker.com/get-docker/"},"Docker")),(0,l.kt)("p",null,"2) Copy the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/kurtosis-tech/near-package/blob/master/launch-local-near-cluster.sh"},"Kurtosis NEAR Package launch script")," by running the following:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -o ~/launch-local-near-cluster.sh https://raw.githubusercontent.com/kurtosis-tech/near-package/master/launch-local-near-cluster.sh -L\n")),(0,l.kt)("p",null,"3) Grant write permission to the script file you just downloaded:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"chmod u+x ~/launch-local-near-cluster.sh\n")),(0,l.kt)("p",null,"4) Launch the Kurtosis NEAR Package:"),(0,l.kt)("p",null,"If you're running the NEAR-in-Kurtosis cluster on your local machine:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"~/launch-local-near-cluster.sh\n")),(0,l.kt)("p",null,"If you're running your NEAR-in-Kurtosis cluster on a machine you intend to access remotely, replace ",(0,l.kt)("inlineCode",{parentName:"p"},"1.2.3.4")," with the IP address of the machine you're running the cluster on:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'~/launch-local-near-cluster.sh \'{"backend_ip_address":"1.2.3.4"}\'\n')),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Example response: "),(0,l.kt)("p",null,(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'Created directory \'/Users/zerix/.neartosis\' for storing all NEAR-in-Kurtosis output\nINFO[2022-12-06T12:59:04+05:30] Creating a new enclave for Starlark to run inside... \nINFO[2022-12-06T12:59:14+05:30] Enclave \'near\' created successfully          \nINFO[2022-12-06T12:59:14+05:30] Kurtosis CLI is running in a non interactive terminal. Everything will work but progress information and the progress bar will not be displayed. \n\n> print "Starting the near-package with input struct(backend_ip_address = \\"127.0.0.1\\")"\nStarting the near-package with input struct(backend_ip_address = "127.0.0.1")\n\n> print "Launching contract helper postgresql"\nLaunching contract helper postgresql\n\n> print "Adding contract helper Posgresql DB running on port \'5432\'"\nAdding contract helper Posgresql DB running on port \'5432\'\n\n> add_service service_id="contract-helper-db"\nService \'contract-helper-db\' added with service GUID \'contract-helper-db-1670311755\'\n\n> exec service_id="contract-helper-db" command=["sleep", "10"]\nCommand returned with exit code \'0\' with no output\n\n> exec service_id="contract-helper-db" command=["psql", "-U", "near", "-c", "\\\\l"]\nCommand returned with exit code \'0\' and the following output: \nList of databases\n   Name    | Owner | Encoding |  Collate   |   Ctype    | Access privileges \n-----------+-------+----------+------------+------------+-------------------\n near      | near  | UTF8     | en_US.utf8 | en_US.utf8 | \n postgres  | near  | UTF8     | en_US.utf8 | en_US.utf8 | \n template0 | near  | UTF8     | en_US.utf8 | en_US.utf8 | =c/near          +\n           |       |          |            |            | near=CTc/near\n template1 | near  | UTF8     | en_US.utf8 | en_US.utf8 | =c/near          +\n           |       |          |            |            | near=CTc/near\n(4 rows)\n\n> exec service_id="contract-helper-db" command=["psql", "-U", "near", "-c", "create database indexer with owner=near"]\nCommand returned with exit code \'0\' and the following output: \'CREATE DATABASE\'\n\n> exec service_id="contract-helper-db" command=["psql", "-U", "near", "-c", "create database analytics with owner=near"]\nCommand returned with exit code \'0\' and the following output: \'CREATE DATABASE\'\n\n> exec service_id="contract-helper-db" command=["psql", "-U", "near", "-c", "create database telemetry with owner=near"]\nCommand returned with exit code \'0\' and the following output: \'CREATE DATABASE\'\n\n> print "Contract helper postgresql db info struct(analytics_db = \\"analytics\\", db_user_password = \\"near\\", db_username = \\"near\\", indexer_db = \\"indexer\\", private_url = struct(ip_address = \\"contract-helper-db\\", path = \\"\\", port_number = 5432, protocol = \\"postgres\\"), telemetry_db = \\"telemetry\\")"\nContract helper postgresql db info struct(analytics_db = "analytics", db_user_password = "near", db_username = "near", indexer_db = "indexer", private_url = struct(ip_address = "contract-helper-db", path = "", port_number = 5432, protocol = "postgres"), telemetry_db = "telemetry")\n\n> print "Launching contract helper dynamo db"\nLaunching contract helper dynamo db\n\n> print "Adding contract helper DynamoDB running on default port \'8000\'"\nAdding contract helper DynamoDB running on default port \'8000\'\n\n> add_service service_id="contract-helper-dynamo-db"\nService \'contract-helper-dynamo-db\' added with service GUID \'contract-helper-dynamo-db-1670311770\'\n\n> print "Contract helper dynamodb info struct(private_url = struct(ip_address = \\"contract-helper-dynamo-db\\", path = \\"\\", port_number = 8000, protocol = \\"TCP\\"))"\nContract helper dynamodb info struct(private_url = struct(ip_address = "contract-helper-dynamo-db", path = "", port_number = 8000, protocol = "TCP"))\n\n> print "Launching indexer"\nLaunching indexer\n\n> print "Adding indexer service..."\nAdding indexer service...\n\n> upload_files src="github.com/kurtosis-tech/near-package/static_files/near-configs/localnet" artifact_id="8f5279c5-d012-4543-88e7-e9829b6d6040"\nFiles uploaded with artifact ID \'8f5279c5-d012-4543-88e7-e9829b6d6040\'\n\n> add_service service_id="indexer-node"\nService \'indexer-node\' added with service GUID \'indexer-node-1670311774\'\n\n> exec service_id="indexer-node" command=["sleep", "10"]\nCommand returned with exit code \'0\' with no output\n\n> exec service_id="indexer-node" command=["cat", "/root/.near/validator_key.json"]\nCommand returned with exit code \'0\' and the following output: \n{\n  "account_id": "test.near",\n  "public_key": "ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW",\n  "secret_key": "ed25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW"\n}\n\n> print "Indexer launched with struct(private_rpc_url = struct(ip_address = \\"indexer-node\\", path = \\"\\", port_number = 3030, protocol = \\"http\\"), public_rpc_url = struct(ip_address = \\"127.0.0.1\\", path = \\"\\", port_number = 8332, protocol = \\"http\\"), validator_key = {\\"account_id\\": \\"test.near\\", \\"public_key\\": \\"ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW\\", \\"secret_key\\": \\"ed25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW\\"})"\nIndexer launched with struct(private_rpc_url = struct(ip_address = "indexer-node", path = "", port_number = 3030, protocol = "http"), public_rpc_url = struct(ip_address = "127.0.0.1", path = "", port_number = 8332, protocol = "http"), validator_key = {"account_id": "test.near", "public_key": "ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW", "secret_key": "ed25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW"})\n\n> print "Launching contract helper"\nLaunching contract helper\n\n> print "Adding contract helper service running on port \'3000\'"\nAdding contract helper service running on port \'3000\'\n\n> add_service service_id="contract-helper-service"\nService \'contract-helper-service\' added with service GUID \'contract-helper-service-1670311796\'\n\n> print "Contract helper launchded with struct(private_url = struct(ip_address = \\"contract-helper-service\\", path = \\"\\", port_number = 3000, protocol = \\"http\\"), public_url = struct(ip_address = \\"127.0.0.1\\", path = \\"\\", port_number = 8330, protocol = \\"http\\"))"\nContract helper launchded with struct(private_url = struct(ip_address = "contract-helper-service", path = "", port_number = 3000, protocol = "http"), public_url = struct(ip_address = "127.0.0.1", path = "", port_number = 8330, protocol = "http"))\n\n> print "Launching explorer backend"\nLaunching explorer backend\n\n> print "Adding explorer backend service"\nAdding explorer backend service\n\n> add_service service_id="explorer-backend"\nService \'explorer-backend\' added with service GUID \'explorer-backend-1670311799\'\n\n> print "Explorer backend launchded with struct(private_url = struct(ip_address = \\"explorer-backend\\", path = \\"\\", port_number = 8080, protocol = \\"http\\"), public_url = struct(ip_address = \\"127.0.0.1\\", path = \\"\\", port_number = 18080, protocol = \\"http\\"))"\nExplorer backend launchded with struct(private_url = struct(ip_address = "explorer-backend", path = "", port_number = 8080, protocol = "http"), public_url = struct(ip_address = "127.0.0.1", path = "", port_number = 18080, protocol = "http"))\n\n> print "Launching explorer frontend"\nLaunching explorer frontend\n\n> print "Adding explorer frontend service running on port \'3000\'"\nAdding explorer frontend service running on port \'3000\'\n\n> add_service service_id="explorer-frontend"\nService \'explorer-frontend\' added with service GUID \'explorer-frontend-1670311803\'\n\n> print "Explorer frontend launchded with struct(public_url = struct(ip_address = \\"127.0.0.1\\", path = \\"\\", port_number = 8331, protocol = \\"http\\"))"\nExplorer frontend launchded with struct(public_url = struct(ip_address = "127.0.0.1", path = "", port_number = 8331, protocol = "http"))\n\n> print "Launching wallet"\nLaunching wallet\n\n> print "Adding wallet service running on port \'3004"\nAdding wallet service running on port \'3004\n\n> print "Replacing variable \'NODE_URL\' to \'http://127.0.0.1:8332\' using regexp: \'([,{])NODE_URL:[^,]*([,}])\'"\nReplacing variable \'NODE_URL\' to \'http://127.0.0.1:8332\' using regexp: \'([,{])NODE_URL:[^,]*([,}])\'\n\n> print "Replacing variable \'ACCOUNT_HELPER_URL\' to \'http://127.0.0.1:8330\' using regexp: \'([,{])ACCOUNT_HELPER_URL:[^,]*([,}])\'"\nReplacing variable \'ACCOUNT_HELPER_URL\' to \'http://127.0.0.1:8330\' using regexp: \'([,{])ACCOUNT_HELPER_URL:[^,]*([,}])\'\n\n> print "Replacing variable \'EXPLORER_URL\' to \'http://127.0.0.1:8331\' using regexp: \'([,{])EXPLORER_URL:[^,]*([,}])\'"\nReplacing variable \'EXPLORER_URL\' to \'http://127.0.0.1:8331\' using regexp: \'([,{])EXPLORER_URL:[^,]*([,}])\'\n\n> print "Replacing variable \'NETWORK_ID\' to \'localnet\' using regexp: \'([,{])NETWORK_ID:[^,]*([,}])\'"\nReplacing variable \'NETWORK_ID\' to \'localnet\' using regexp: \'([,{])NETWORK_ID:[^,]*([,}])\'\n\n> print "Replacing variable \'ACCOUNT_ID_SUFFIX\' to \'test.near\' using regexp: \'([,{])ACCOUNT_ID_SUFFIX:[^,]*([,}])\'"\nReplacing variable \'ACCOUNT_ID_SUFFIX\' to \'test.near\' using regexp: \'([,{])ACCOUNT_ID_SUFFIX:[^,]*([,}])\'\n\n> print "Replacing variable \'ACCESS_KEY_FUNDING_AMOUNT\' to \'3000000000000000000000000\' using regexp: \'([,{])ACCESS_KEY_FUNDING_AMOUNT:[^,]*([,}])\'"\nReplacing variable \'ACCESS_KEY_FUNDING_AMOUNT\' to \'3000000000000000000000000\' using regexp: \'([,{])ACCESS_KEY_FUNDING_AMOUNT:[^,]*([,}])\'\n\n> add_service service_id="wallet"\nService \'wallet\' added with service GUID \'wallet-1670311807\'\n\n> print "Explorer wallet struct(public_url = struct(ip_address = \\"127.0.0.1\\", path = \\"\\", port_number = 8334, protocol = \\"http\\"))"\nExplorer wallet struct(public_url = struct(ip_address = "127.0.0.1", path = "", port_number = 8334, protocol = "http"))\n\nStarlark code successfully run. Output was:\n{\n    "contract_helper_service_url": "http://127.0.0.1:8330",\n    "explorer_url": "http://127.0.0.1:8331",\n    "near_node_rpc_url": "http://127.0.0.1:8332",\n    "network_name": "localnet",\n    "root_validator_key": {\n        "account_id": "test.near",\n        "public_key": "ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW",\n        "secret_key": "ed25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW"\n    },\n    "wallet_url": "http://127.0.0.1:8334"\n}\nINFO[2022-12-06T13:00:10+05:30] ============================================= \nINFO[2022-12-06T13:00:10+05:30] ||          Created enclave: near          || \nINFO[2022-12-06T13:00:10+05:30] ============================================= \n============================================================ SUCCESS ================================================================================\n  ACTION Paste the following in your terminal to declare the following variables so you can use them:\n\n         export NEAR_ENV="local"\n         export NEAR_CLI_LOCALNET_NETWORK_ID="localnet"\n         export NEAR_NODE_URL="http://127.0.0.1:8332"\n         export NEAR_CLI_LOCALNET_KEY_PATH="/Users/zerix/.neartosis/2022-12-06T12.59.04/validator-key.json"\n         export NEAR_WALLET_URL="http://127.0.0.1:8334"\n         export NEAR_HELPER_URL="http://127.0.0.1:8330"\n         export NEAR_HELPER_ACCOUNT="test.near\n\\"ed25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW\\"})\ned25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW"})\ntest.near"\n         export NEAR_EXPLORER_URL="http://127.0.0.1:8331"\n  \n  ACTION Paste the following into your terminal now to use the \'local_near\' command as a replacement for the NEAR CLI for connecting to your\n         local cluster (e.g. \'local_near login\'):\n  \n         alias local_near=\'NEAR_ENV="local" NEAR_CLI_LOCALNET_NETWORK_ID="localnet" NEAR_NODE_URL="http://127.0.0.1:8332" NEAR_CLI_LOCALNET_KEY_PATH="/Users/zerix/.neartosis/2022-12-06T12.59.04/validator-key.json" NEAR_WALLET_URL="http://127.0.0.1:8334" NEAR_HELPER_URL="http://127.0.0.1:8330" NEAR_HELPER_ACCOUNT="test.near\n\\"ed25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW\\"})\ned25519:2ykcMLiM7vCmsSECcgfmUzihBtNdBv7v2CxNi94sNt4R8ar4xsrMMYvtsSNGQDfSRhNWXEnZvgx2wzS9ViBiS9jW"})\ntest.near" NEAR_EXPLORER_URL="http://127.0.0.1:8331" near\'\n  \n  ACTION If you want the \'local_near\' command available in all your new terminal windows, add the above alias into your .bash_profile/.bashrc/.zshrc\n         file and open a new terminal window.\n  \n  ACTION To stop your cluster, run the following:\n\n         kurtosis enclave stop near\n\n  ACTION To remove your cluster, run:\n\n         kurtosis clean -a\n\n============================================================ SUCCESS ================================================================================\n')),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"The URLs and validator key value above will be the same for each run of Kurtosis, so you can safely use these values in your config files.")),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"If you're running Kurtosis on a remote machine, you'll also need to:"),(0,l.kt)("ul",{parentName:"admonition"},(0,l.kt)("li",{parentName:"ul"},"Replace the ",(0,l.kt)("inlineCode",{parentName:"li"},"127.0.0.1")," IP addresses in the environment variables with the IP address of your remote machine"),(0,l.kt)("li",{parentName:"ul"},"Copy the validator key from where it lives on the machine running Kurtosis (in ",(0,l.kt)("inlineCode",{parentName:"li"},"NEAR_CLI_LOCALNET_KEY_PATH"),") to somewhere on your local machine"),(0,l.kt)("li",{parentName:"ul"},"Adjust the value of the ",(0,l.kt)("inlineCode",{parentName:"li"},"NEAR_CLI_LOCALNET_KEY_PATH")," on your local machine to match the location you stored the key at"))))),(0,l.kt)("p",null,"If you ever forget the above URLs, you can inspect the cluster:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"kurtosis enclave inspect near\n")),(0,l.kt)("h3",{id:"setup-environment-variables"},"Setup Environment Variables"),(0,l.kt)("p",null,"After deploying your Kurtosis NEAR Package, you will need to setup some environment variables to make life a lot easier. Notice the ",(0,l.kt)("strong",{parentName:"p"},"ACTION")," sections in your terminal log from the package deployment. You will be using these exact values to setup these variables. "),(0,l.kt)("p",null,"1) Follow the first ACTION item from the deployment log by copying all of the export commands and running them in your terminal."),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Example exports: (DO NOT COPY ~ yours will be slightly different)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'export NEAR_ENV="local"\nexport NEAR_CLI_LOCALNET_NETWORK_ID="localnet"\nexport NEAR_NODE_URL="http://127.0.0.1:8332"\nexport NEAR_CLI_LOCALNET_KEY_PATH="/Users/zerix/.neartosis/2022-06-03T18.04.32/validator-key.json"\nexport NEAR_WALLET_URL="http://127.0.0.1:8334"\nexport NEAR_HELPER_URL="http://127.0.0.1:8330"\nexport NEAR_HELPER_ACCOUNT="test.near"\nexport NEAR_EXPLORER_URL="http://127.0.0.1:8331"\n')),(0,l.kt)("p",null,"2) Proceed to the second ACTION item which asks you to create an alias for ",(0,l.kt)("inlineCode",{parentName:"p"},"local_near"),". This is what we will use when running ",(0,l.kt)("a",{parentName:"p",href:"/tools/near-cli"},(0,l.kt)("inlineCode",{parentName:"a"},"near-cli"))," commands with our test environment. "),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Example alias: (DO NOT COPY ~ yours will be slightly different)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'alias local_near=\'NEAR_ENV="local" NEAR_CLI_LOCALNET_NETWORK_ID="localnet" NEAR_NODE_URL="http://127.0.0.1:8332" NEAR_CLI_LOCALNET_KEY_PATH="/Users/zerix/.neartosis/2022-06-03T18.04.32/validator-key.json" NEAR_WALLET_URL="http://127.0.0.1:8334" NEAR_HELPER_URL="http://127.0.0.1:8330" NEAR_HELPER_ACCOUNT="test.near" NEAR_EXPLORER_URL="http://127.0.0.1:8331" near\'\n')),(0,l.kt)("p",null,"Now replacing ",(0,l.kt)("inlineCode",{parentName:"p"},"near")," with ",(0,l.kt)("inlineCode",{parentName:"p"},"local_near")," when running ",(0,l.kt)("a",{parentName:"p",href:"/tools/near-cli"},(0,l.kt)("inlineCode",{parentName:"a"},"near-cli"))," commands will perform these actions in your local test environment."),(0,l.kt)("h3",{id:"testing"},"Testing"),(0,l.kt)("p",null,"Ensure that your alias is working correctly by checking the state of the root account ",(0,l.kt)("inlineCode",{parentName:"p"},"test.near"),"."),(0,l.kt)("p",null,"Run the following in your terminal:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"local_near state test.near\n")),(0,l.kt)("p",null,"This should return something similar to the following output:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"Loaded master account test.near key from /Users/zerix/.neartosis/2022-06-03T18.04.32/validator-key.json with public key = ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW\nAccount test.near\n{\n  amount: '1000000000000000000000000000000000',\n  block_hash: 'G8jx4pYgqFSFSCDyM9MvVYj3HAdgRuxhkAHGweNhUNrY',\n  block_height: 224,\n  code_hash: '11111111111111111111111111111111',\n  locked: '50000000000000000000000000000000',\n  storage_paid_at: 0,\n  storage_usage: 182,\n  formattedAmount: '1,000,000,000'\n}\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Congratulations! Setup is complete and you are ready to start exploring your local NEAR blockchain!")," \ud83c\udf89"),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"The Kurtosis Team has created a great ",(0,l.kt)("a",{parentName:"p",href:"https://www.loom.com/share/8a1b8e2138334a81a380f5d523fba27e"},"video presentation")," that covers the above steps as well as demoing the functionality of this local network setup.")),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"using-wallet-and-explorer"},"Using Wallet and Explorer"),(0,l.kt)("h3",{id:"local-near-wallet"},"Local NEAR Wallet"),(0,l.kt)("p",null,"Now that you have ",(0,l.kt)("a",{parentName:"p",href:"#setup"},"everything setup"),", create an account using ",(0,l.kt)("a",{parentName:"p",href:"http://127.0.0.1:8334"},"your local NEAR Wallet at http://127.0.0.1:8334"),"."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Local wallet landing page",src:n(68423).Z,width:"3582",height:"1816"})),(0,l.kt)("p",null,"The account creation is exactly the same as on mainnet or testnet but ",(0,l.kt)("strong",{parentName:"p"},"only the passphrase recovery mode")," will work here. Also note that the root account is ",(0,l.kt)("inlineCode",{parentName:"p"},"test.near")," instead of ",(0,l.kt)("inlineCode",{parentName:"p"},"testnet")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"mainnet"),". This means that all the accounts you create will be ",(0,l.kt)("a",{parentName:"p",href:"/concepts/basics/accounts/model#subaccounts"},"subaccounts")," of ",(0,l.kt)("inlineCode",{parentName:"p"},"test.near"),". (ex. ",(0,l.kt)("inlineCode",{parentName:"p"},"benji.test.near"),")"),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"Because the Wallet will start on the same host and port, and the Wallet stores your account information in your browser's local storage, if you've created an account with a previous Kurtosis network then the Wallet will be storing the old account's information (which won't work with your new network). If this is the case for you, you'll need to clear the Wallet's storage by visiting ",(0,l.kt)("a",{parentName:"p",href:"chrome://settings/siteData?searchSubpage=127.0.0.1"},"your Chrome's local storage"),", removing the ",(0,l.kt)("inlineCode",{parentName:"p"},"127.0.0.1")," entry, and refreshing the Wallet.")),(0,l.kt)("p",null,'Now that you\'ve created an account, try interacting with it using the local CLI. In order to use this account you will need to "login" with it via CLI which will save a full access key locally for that account. ',(0,l.kt)("a",{parentName:"p",href:"/tools/near-cli#near-login"},(0,l.kt)("inlineCode",{parentName:"a"},"near login"))," is the command to perform this action but as you are on ",(0,l.kt)("inlineCode",{parentName:"p"},"localnet")," you will need to replace ",(0,l.kt)("inlineCode",{parentName:"p"},"near")," with ",(0,l.kt)("inlineCode",{parentName:"p"},"local_near"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"local_near login\n")),(0,l.kt)("p",null,"This launches the local wallet site and will ask for confirmation for this action. Once you authorize you should see confirmation in your terminal similar to this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"Logged in as [ kevin.test.near ] with public key [ ed25519:8EaALn... ] successfully\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Export your account ID to an environment variable by running the following: (replacing YOUR_ACCOUNT_ID)")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"export ACCOUNT_ID=YOUR_ACCOUNT_ID\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Now create a test transaction by sending 1 $NEAR to the root account ",(0,l.kt)("inlineCode",{parentName:"li"},"test.near"),":")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"local_near send $ACCOUNT_ID test.near 1\n")),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Example response: "),(0,l.kt)("p",null,(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"Sending 1 NEAR to test.near from kevin.test.near\nLoaded master account test.near key from /Users/zerix/.neartosis/2022-06-03T18.04.32/validator-key.json with public key = ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW\nTransaction Id 3e3H5zqj9noKGYTCMqeZ5pb4NWK7tQsjYKak6ybtpgvD\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttp://127.0.0.1:8331/transactions/3e3H5zqj9noKGYTCMqeZ5pb4NWK7tQsjYKak6ybtpgvD\n")))),(0,l.kt)("h3",{id:"local-near-explorer"},"Local NEAR Explorer"),(0,l.kt)("p",null,"Again, now that you have ",(0,l.kt)("a",{parentName:"p",href:"#setup"},"everything setup")," you can view the transaction details of the command you just performed at the end of ",(0,l.kt)("a",{parentName:"p",href:"#local-near-wallet"},"the last section"),". Notice that the last line of the terminal log displays a link to the transaction details in your local NEAR Explorer."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"Sending 1 NEAR to test.near from kevin.test.near\nLoaded master account test.near key from /Users/zerix/.neartosis/2022-06-03T18.04.32/validator-key.json with public key = ed25519:3Kuyi2DUXdoHgoaNEvCxa1m6G8xqc6Xs7WGajaqLhNmW\nTransaction Id 3e3H5zqj9noKGYTCMqeZ5pb4NWK7tQsjYKak6ybtpgvD\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttp://127.0.0.1:8331/transactions/3e3H5zqj9noKGYTCMqeZ5pb4NWK7tQsjYKak6ybtpgvD\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Click on this link or copy/paste it into your browser:")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Local explorer sending 1 NEAR",src:n(31259).Z,width:"2226",height:"1618"})),(0,l.kt)("p",null,"Here everything behaves exactly like the ",(0,l.kt)("inlineCode",{parentName:"p"},"testnet")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"mainnet")," NEAR Explorer except it is retrieving data from your local NEAR blockchain!"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"If you ever need to open your local NEAR Explorer, you can ",(0,l.kt)("a",{parentName:"li",href:"http://127.0.0.1:8331/"},"always visit 127.0.0.1:8331")," or run:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"echo $NEAR_EXPLORER_URL\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Example Response:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"http://127.0.0.1:8331\n")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Localnet explorer",src:n(14348).Z,width:"2918",height:"1801"})),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"deploy-a-smart-contract"},"Deploy a Smart Contract"),(0,l.kt)("p",null,"With everything setup and your ",(0,l.kt)("inlineCode",{parentName:"p"},"test.near")," account created, it's time to deploy a smart contract on ",(0,l.kt)("inlineCode",{parentName:"p"},"localnet"),". For this example you will deploy an NFT use a pre-compiled WASM smart contract from ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/near-examples/nft-tutorial.git"},"this NFT example"),"."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Download the smart contract:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"curl -o ~/main.wasm https://github.com/near-examples/nft-tutorial/raw/main/out/main.wasm -L\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Deploy the smart contract:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"local_near deploy --wasmFile ~/main.wasm --accountId $ACCOUNT_ID\n")),(0,l.kt)("details",null,(0,l.kt)("summary",null,"Example response: "),(0,l.kt)("p",null,(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Loaded master account test.near key from /Users/benjaminkurrek/.neartosis/2021-12-02T13.37.41/validator-key.json with public key = ed25519:AnLHi4ZAxfxFAQSXniycyZS6dpBqxhmVZH3zBCZbqAS6\nStarting deployment. Account id: goteam.test.near, node: http://127.0.0.1:62285, helper: http://127.0.0.1:62286, file: /Users/benjaminkurrek/main.wasm\nTransaction Id 7atHm2piVehEitYeMF2FxWuRJVd6ZdRQEo3K83P98GuR\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttp://127.0.0.1:62290/transactions/7atHm2piVehEitYeMF2FxWuRJVd6ZdRQEo3K83P98GuR\nDone deploying to goteam.test.near\n")))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Click on the clink to the Explorer and verify that the contract was deployed:")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Local explorer contract deployed",src:n(79498).Z,width:"2242",height:"1804"})),(0,l.kt)("p",null,"Now, let's interact with the deployed contract."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"First, initialize the contract by running the following command: ")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"local_near call $ACCOUNT_ID new_default_meta '{\"owner_id\": \"'$ACCOUNT_ID'\"}' --accountId $ACCOUNT_ID\n")),(0,l.kt)("p",null,"This will initialize the contract with some default metadata and set our account ID as the owner of the contract."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Now mint your first NFT!")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'local_near call $ACCOUNT_ID nft_mint \'{"token_id": "team_token", "metadata": { "title": "Go Team!", "description": "Go Team!", "media": "https://bafybeiftczwrtyr3k7a2k4vutd3amkwsmaqyhrdzlhvpt33dyjivufqusq.ipfs.dweb.link/goteam-gif.gif", "copies": 1}, "receiver_id": "\'$ACCOUNT_ID\'"}\' --accountId $ACCOUNT_ID --amount 0.1\n')),(0,l.kt)("p",null,"Once the NFT has been minted, you can view the token on the local wallet's collectibles tab. If you already had the wallet site open, simply refresh. Otherwise open your local NEAR Wallet instance and view your collectible. "),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Local wallet collectibles tab",src:n(77033).Z,width:"609",height:"567"})),(0,l.kt)("p",null,"We won't spoil what the NFT is, but once you switch over to the collectibles tab your beautiful token should be there!"),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"connecting-a-dapp-to-localnet"},"Connecting a dApp to ",(0,l.kt)("inlineCode",{parentName:"h2"},"localnet")),(0,l.kt)("p",null,"The ability to develop decentralized applications locally is a dream come true for dApp developers and the Kurtosis NEAR Package really simplifies this process. Here you'll integrate ",(0,l.kt)("inlineCode",{parentName:"p"},"localnet")," into one of the examples at ",(0,l.kt)("a",{parentName:"p",href:"http://near.dev"},"near.dev"),"."),(0,l.kt)("h3",{id:"clone-example-dapp"},"Clone Example dApp"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Clone the ",(0,l.kt)("a",{parentName:"li",href:"https://github.com/near-examples/guest-book-js"},"NEAR Guestbook")," repository:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/near-examples/guest-book-js.git\n")),(0,l.kt)("h3",{id:"configure-network"},"Configure Network"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Open the ",(0,l.kt)("inlineCode",{parentName:"li"},"src/config.js")," file inside the guestbook repo and scroll down to the ",(0,l.kt)("inlineCode",{parentName:"li"},"local")," config:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"case 'local':\n      return {\n        networkId: 'local',\n        nodeUrl: 'http://localhost:3030',\n        keyPath: `${process.env.HOME}/.near/validator_key.json`,\n        walletUrl: 'http://localhost:4000/wallet',\n        contractName: CONTRACT_NAME\n      };\n")),(0,l.kt)("p",null,"Here you will need to update all of the values ",(0,l.kt)("strong",{parentName:"p"},"except")," the ",(0,l.kt)("inlineCode",{parentName:"p"},"contractName"),". Copy the following into your ",(0,l.kt)("inlineCode",{parentName:"p"},"local")," case. This will automatically assign the config to your environment variables if you've specified them. This way, you don't need to change anything when running new enclaves."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"case 'local':\n      return {\n            networkId: process.env.NEAR_CLI_LOCALNET_NETWORK_ID || 'local',\n            nodeUrl: process.env.NEAR_NODE_URL || 'http://localhost:3030',\n            keyPath: process.env.NEAR_CLI_LOCALNET_KEY_PATH || `${process.env.HOME}/.near/validator_key.json`,\n            walletUrl: process.env.NEAR_WALLET_URL || 'http://localhost:4000/wallet',\n            contractName: CONTRACT_NAME,\n        };\n")),(0,l.kt)("p",null,"The last thing you will need to do is set your ",(0,l.kt)("inlineCode",{parentName:"p"},"NODE_ENV")," in your terminal to ",(0,l.kt)("inlineCode",{parentName:"p"},"local")," so your dApp will use the values we configured above."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Run:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"export NODE_ENV=local\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Your dApp is now fully configured to use ",(0,l.kt)("inlineCode",{parentName:"strong"},"localnet"),"!")," \ud83c\udf89"),(0,l.kt)("h3",{id:"create-contract-account"},"Create Contract Account"),(0,l.kt)("p",null,"As mentioned earlier, you do not need to change the ",(0,l.kt)("inlineCode",{parentName:"p"},"contractName")," in the ",(0,l.kt)("inlineCode",{parentName:"p"},"config.js")," file you updated earlier. This is an environment variable you will configure now. Let's quickly create a subaccount from ",(0,l.kt)("a",{parentName:"p",href:"#local-near-wallet"},"the account you created earlier")," to deploy the guest-book contract to."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Using the ",(0,l.kt)("inlineCode",{parentName:"li"},"local_near CLI"),", run the following command:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"local_near create-account guest-book.$ACCOUNT_ID --masterAccount $ACCOUNT_ID --initialBalance 5\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Example Response:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"Loaded master account test.near key from /Users/benjaminkurrek/.neartosis/2021-12-02T13.37.41/validator-key.json with public key = ed25519:AnLHi4ZAxfxFAQSXniycyZS6dpBqxhmVZH3zBCZbqAS6\nSaving key to 'undefined/localnet/guest-book.goteam.test.near.json'\nAccount guest-book.goteam.test.near for network \"localnet\" was created.\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Export the ",(0,l.kt)("inlineCode",{parentName:"li"},"CONTRACT_NAME")," environment variable as the account you just created:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"export CONTRACT_NAME=guest-book.$ACCOUNT_ID\n")),(0,l.kt)("h3",{id:"deploy-contract-to-localnet"},"Deploy Contract to ",(0,l.kt)("inlineCode",{parentName:"h3"},"localnet")),(0,l.kt)("p",null,"With the network setup and contract account created you are now ready to launch your dApp! "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Run the following command in the root directory of the guest book repo:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yarn && yarn start\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Example Response:")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Local dApp build",src:n(48381).Z,width:"2024",height:"1200"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Open the dApp by clicking on the server address in the terminal:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"Server running at http://localhost:1234\n\u2728  Built in 1.20s.\n")),(0,l.kt)("p",null,"You should see the Guest Book landing page:"),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Local Guest Book Landing Page",src:n(88925).Z,width:"1770",height:"906"})),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"}," If you run into any problems signing into try clearing your browser's local storage. If you've used the guest-book before your browser might think you're still logged in with your ",(0,l.kt)("inlineCode",{parentName:"p"},"testnet")," account and it will throw an error saying it can't find that account on ",(0,l.kt)("inlineCode",{parentName:"p"},"localnet"),".")),(0,l.kt)("p",null,"Once you've logged in, you can sign a message with an optional donation. "),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Local Guest Book Signed Message",src:n(61244).Z,width:"1818",height:"1216"})),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Sign the Guest Book which will create a transaction on ",(0,l.kt)("inlineCode",{parentName:"p"},"localnet"),". ")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Once complete, open your local NEAR explorer and you can view the transaction you just created!"))),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Local Explorer Signed Transaction",src:n(62439).Z,width:"2278",height:"1716"})),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Congratulations! You've successfully deployed and interacted with a dApp on a local NEAR blockchain!")," \ud83c\udf89"),(0,l.kt)("hr",null),(0,l.kt)("h2",{id:"managing-near-pacakages"},"Managing NEAR Pacakages"),(0,l.kt)("p",null,'The Kurtosis NEAR Pacakages you create will continue to run on your local machine for as long as your Docker engine is running. This package runs inside of a Kurtosis "enclave" which is an environment isolated from both your computer and other enclaves. In practice, this means that you can have multiple independent local NEAR clusters running on your machine simply by rerunning the script we executed from the ',(0,l.kt)("a",{parentName:"p",href:"#setup"},"setup instructions"),"."),(0,l.kt)("h3",{id:"view-package-status"},"View Package Status"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"To see the status of your existing enclaves, run:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"kurtosis enclave ls\n")),(0,l.kt)("h3",{id:"view-package-details"},"View Package Details"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"To see detailed information about an enclave, copy an enclave ID and run:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"kurtosis enclave inspect near\n")),(0,l.kt)("h3",{id:"terminate-package"},"Terminate Package"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"To shut down your NEAR Package and free up resources on your machine, run the following:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"kurtosis enclave stop near\n")),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"You will not be able to restart the cluster! If this is something you need, please ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/kurtosis-tech/kurtosis-cli-release-artifacts"},"file an issue here")," so we can prioritize it.")),(0,l.kt)("h3",{id:"delete-package"},"Delete Package"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Stopping an enclave leaves its resources intact so that you can examine them if need be. To destroy a stopped enclave and free its resources, run:")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"kurtosis clean\n")),(0,l.kt)("h3",{id:"delete-all-package"},"Delete All Package"),(0,l.kt)("p",null,"If you would like to destroy ",(0,l.kt)("em",{parentName:"p"},"all")," enclaves, regardless of if they're running, pass the ",(0,l.kt)("inlineCode",{parentName:"p"},"-a")," flag to ",(0,l.kt)("inlineCode",{parentName:"p"},"clean")," like so:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"kurtosis clean -a\n")),(0,l.kt)("p",null,"This can be a handy way to clear all your Kurtosis data."))}h.isMDXComponent=!0},48381:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/local-dapp-build-e3843364fc1b7c3e3a1575f3d437942d.png"},79498:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/local-explorer-contract-deployed-fc387dfb7d4a3eec1f51b7e4a6cd1993.png"},31259:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/local-explorer-send-funds-94ba1fd8be4b0f444822504056368c3b.png"},62439:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/local-explorer-signed-transaction-37c5443fefdf2b237ef4f46610e68c89.png"},88925:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/local-guest-book-landing-e0bd73cfaa0076eb861feaf9b544efa3.png"},61244:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/local-guest-book-signed-message-0fb7fbb78826794eef2155e86161b398.png"},77033:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/local-wallet-collectibles-tab-087af32b1739fa65e7e713e1ff0f7534.png"},68423:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/local-wallet-landing-page-6dd7ef28b8410562b2bcbb286ad596bb.png"},14348:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/localnet-explorer-805fec883bacc4cb4cd03dcea828ea8c.png"}}]);