"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2734],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),i=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=i(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=i(n),g=r,h=d["".concat(l,".").concat(g)]||d[g]||u[g]||o;return n?a.createElement(h,s(s({ref:t},p),{},{components:n})):a.createElement(h,s({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:r,s[1]=c;for(var i=2;i<o;i++)s[i]=n[i];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4740:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>g,frontMatter:()=>c,metadata:()=>i,toc:()=>u});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),s=["components"],c={id:"balance-changes",title:"Balance changes",sidebar_label:"Balance Changes"},l=void 0,i={unversionedId:"integrator/balance-changes",id:"integrator/balance-changes",title:"Balance changes",description:"Prerequisites",source:"@site/../docs/6.integrator/balance.md",sourceDirName:"6.integrator",slug:"/integrator/balance-changes",permalink:"/integrator/balance-changes",draft:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/6.integrator/balance.md",tags:[],version:"current",lastUpdatedBy:"[sm-stack]",lastUpdatedAt:1675844989,formattedLastUpdatedAt:"Feb 8, 2023",frontMatter:{id:"balance-changes",title:"Balance changes",sidebar_label:"Balance Changes"},sidebar:"integrate",previous:{title:"Exchange Integration",permalink:"/integrator/exchange-integration"},next:{title:"Accounts",permalink:"/integrator/accounts"}},p={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Native NEAR (\u24c3)",id:"native-near",level:3},{value:"Send Tokens",id:"send-tokens",level:2},{value:"View Balance Changes",id:"view-balance-changes",level:2}],d={toc:u};function g(e){var t=e.components,n=(0,r.Z)(e,s);return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://wallet.testnet.near.org/create"},"NEAR Account")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"/tools/near-cli"},"NEAR-CLI")),(0,o.kt)("li",{parentName:"ul"},"Credentials for sender account stored locally by running ",(0,o.kt)("a",{parentName:"li",href:"/tools/near-cli#near-login"},(0,o.kt)("inlineCode",{parentName:"a"},"near login")))),(0,o.kt)("h3",{id:"native-near"},"Native NEAR (\u24c3)"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Balance changes on accounts can be tracked by using our ",(0,o.kt)("a",{parentName:"p",href:"/api/rpc/setup#view-account-changes"},"changes RPC endpoint"),". You can test this out by sending tokens to an account using ",(0,o.kt)("a",{parentName:"p",href:"/tools/near-cli#near-send"},"NEAR-CLI")," and then viewing the changes made.")),(0,o.kt)("h2",{id:"send-tokens"},"Send Tokens"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Send tokens using ",(0,o.kt)("a",{parentName:"li",href:"/tools/near-cli#near-send"},(0,o.kt)("inlineCode",{parentName:"a"},"near send")))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"near send sender.testnet receiver.testnet 1\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"You should see a result in your terminal that looks something like this:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Sending 1 NEAR to receiver.testnet from sender.testnet\nTransaction Id 4To336bYcoGc3LMucJPMk6fMk5suKfCrdNotrRtTxqDy\nTo see the transaction in the transaction explorer, please open this url in your browser\nhttps://explorer.testnet.near.org/transactions/4To336bYcoGc3LMucJPMk6fMk5suKfCrdNotrRtTxqDy\n")),(0,o.kt)("h2",{id:"view-balance-changes"},"View Balance Changes"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Open the transaction URL in ",(0,o.kt)("a",{parentName:"li",href:"https://explorer.testnet.near.org/"},"NEAR Explorer")," and copy the ",(0,o.kt)("inlineCode",{parentName:"li"},"BLOCK HASH"),"."),(0,o.kt)("li",{parentName:"ul"},"Using the ",(0,o.kt)("inlineCode",{parentName:"li"},"BLOCK HASH")," and the accountId, query the ",(0,o.kt)("a",{parentName:"li",href:"/api/rpc/setup#view-account-changes"},"changes RPC endpoint")," to view changes.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Example Query using HTTPie:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'http post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare \\\n    method=EXPERIMENTAL_changes \\\n    \'params:={\n        "block_id": "CJ24svU3C9FaULVjcNVnWuVZjK6mNaQ8p6AMyUDMqB37",\n        "changes_type": "account_changes",\n        "account_ids": ["sender.testnet"]\n    }\'\n')),(0,o.kt)("details",null,(0,o.kt)("summary",null,"**Example Response:**"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "dontcare",\n  "jsonrpc": "2.0",\n  "result": {\n    "block_hash": "BRgE4bjmUo33jmiVBcZaWGkSLVeL7TTi4ZxYTvJdPbB9",\n    "changes": [\n      {\n        "cause": {\n          "tx_hash": "4To336bYcoGc3LMucJPMk6fMk5suKfCrdNotrRtTxqDy",\n          "type": "transaction_processing"\n        },\n        "change": {\n          "account_id": "sender.testnet",\n          "amount": "11767430014412510000000000",\n          "code_hash": "11111111111111111111111111111111",\n          "locked": "0",\n          "storage_paid_at": 0,\n          "storage_usage": 806\n        },\n        "type": "account_update"\n      }\n    ]\n  }\n}\n'))),(0,o.kt)("hr",null),(0,o.kt)("p",null,"Alternatively, you can view account balances by ",(0,o.kt)("a",{parentName:"p",href:"/api/rpc/setup#view-account"},"querying ",(0,o.kt)("inlineCode",{parentName:"a"},"view_account"))," which only requires an accountId."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Example HTTPie Request:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'http post https://rpc.testnet.near.org jsonrpc=2.0 id=dontcare method=query \\\nparams:=\'{\n  "request_type": "view_account",\n  "finality": "final",\n  "account_id": "sender.testnet"\n}\'\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Example Response:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "id": "dontcare",\n  "jsonrpc": "2.0",\n  "result": {\n    "amount": "11767430683960197500000000",\n    "block_hash": "HUiscpNyoyR5z1UdnZhAJLNz1G8UjBrFTecSYqCrvdfW",\n    "block_height": 50754977,\n    "code_hash": "11111111111111111111111111111111",\n    "locked": "0",\n    "storage_paid_at": 0,\n    "storage_usage": 806\n  }\n}\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Note:")," Gas prices can change between blocks. Even for transactions with deterministic gas cost the cost in NEAR could also be different. You can query the gas price for recent blocks using the ",(0,o.kt)("a",{parentName:"p",href:"https://docs.near.org/api/rpc/setup#gas-price"},(0,o.kt)("inlineCode",{parentName:"a"},"gas_price")," RPC endpoint"),"."),(0,o.kt)("hr",null),(0,o.kt)("admonition",{title:"Got a question?",type:"tip"},(0,o.kt)("a",{href:"https://stackoverflow.com/questions/tagged/nearprotocol"},(0,o.kt)("h8",null,"Ask it on StackOverflow!"))))}g.isMDXComponent=!0}}]);